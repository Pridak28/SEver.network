<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Device-Specific Mobile Tests</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #0a0e27;
      color: #fff;
      padding: 20px;
    }

    .header {
      text-align: center;
      padding: 30px;
      background: linear-gradient(135deg, #00ffff 0%, #0080ff 100%);
      border-radius: 16px;
      margin-bottom: 30px;
    }

    .header h1 {
      color: #000;
      font-size: 2rem;
      margin-bottom: 10px;
    }

    .header p {
      color: #003;
      font-size: 1rem;
    }

    .device-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .device-card {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(0, 255, 255, 0.3);
      border-radius: 12px;
      padding: 20px;
      transition: all 0.3s ease;
    }

    .device-card:hover {
      border-color: #00ffff;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
    }

    .device-name {
      font-size: 1.3rem;
      color: #00ffff;
      margin-bottom: 12px;
      font-weight: bold;
    }

    .device-specs {
      font-size: 0.9rem;
      color: #aaa;
      margin-bottom: 16px;
    }

    .device-specs div {
      margin: 4px 0;
    }

    .test-button {
      width: 100%;
      background: linear-gradient(135deg, #00ffff 0%, #0080ff 100%);
      border: none;
      color: #000;
      padding: 12px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .test-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 255, 255, 0.4);
    }

    .test-button:active {
      transform: translateY(0);
    }

    .simulator-frame {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      padding: 20px;
    }

    .simulator-frame.active {
      display: flex;
    }

    .simulator-container {
      background: #1a1a2e;
      border: 3px solid #00ffff;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 0 40px rgba(0, 255, 255, 0.5);
      position: relative;
      max-width: 100%;
      max-height: 100%;
      overflow: auto;
    }

    .simulator-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(0, 255, 255, 0.3);
    }

    .simulator-title {
      color: #00ffff;
      font-size: 1.2rem;
      font-weight: bold;
    }

    .close-button {
      background: #ff4444;
      border: none;
      color: #fff;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }

    .close-button:hover {
      background: #ff6666;
    }

    .device-iframe-container {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      position: relative;
    }

    .device-iframe {
      width: 100%;
      border: none;
      background: #fff;
    }

    .test-results {
      margin-top: 16px;
      padding: 16px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      border: 1px solid rgba(0, 255, 255, 0.2);
    }

    .test-item {
      display: flex;
      align-items: center;
      margin: 8px 0;
      font-size: 0.95rem;
    }

    .status-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .status-pass { background: #0f0; box-shadow: 0 0 8px #0f0; }
    .status-fail { background: #f00; box-shadow: 0 0 8px #f00; }
    .status-pending { background: #ff0; box-shadow: 0 0 8px #ff0; }

    .info-box {
      background: rgba(0, 255, 255, 0.1);
      border: 1px solid rgba(0, 255, 255, 0.3);
      border-radius: 8px;
      padding: 16px;
      margin: 20px 0;
    }

    .info-box h3 {
      color: #00ffff;
      margin-bottom: 8px;
    }

    .info-box ul {
      margin-left: 20px;
      line-height: 1.6;
    }

    @media (max-width: 768px) {
      .device-grid {
        grid-template-columns: 1fr;
      }

      .header h1 {
        font-size: 1.5rem;
      }

      .simulator-container {
        width: 100%;
        height: 100%;
        border-radius: 0;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üì± Device-Specific Mobile Testing</h1>
    <p>Test mobile conflicts fixes across popular devices</p>
  </div>

  <div class="info-box">
    <h3>üéØ What This Tests:</h3>
    <ul>
      <li><strong>Breakpoint Detection:</strong> 768px threshold across all devices</li>
      <li><strong>Touch Targets:</strong> Minimum 44x44px on mobile devices</li>
      <li><strong>Hamburger Menu:</strong> Visibility and functionality on mobile</li>
      <li><strong>Touch Handlers:</strong> Unified touch event management</li>
      <li><strong>Responsive Layouts:</strong> Grid/flex behavior at different sizes</li>
      <li><strong>Landscape Mode:</strong> 768px breakpoint in landscape orientation</li>
    </ul>
  </div>

  <div class="device-grid" id="deviceGrid"></div>

  <div class="simulator-frame" id="simulatorFrame">
    <div class="simulator-container">
      <div class="simulator-header">
        <div class="simulator-title" id="simulatorTitle">Device Simulator</div>
        <button class="close-button" onclick="closeSimulator()">‚úï Close</button>
      </div>
      <div class="device-iframe-container" id="iframeContainer">
        <iframe class="device-iframe" id="deviceIframe"></iframe>
      </div>
      <div class="test-results" id="testResults"></div>
    </div>
  </div>

  <script>
    const devices = [
      {
        name: "iPhone SE",
        width: 375,
        height: 667,
        category: "Phone",
        os: "iOS",
        expectedMobile: true
      },
      {
        name: "iPhone 12/13",
        width: 390,
        height: 844,
        category: "Phone",
        os: "iOS",
        expectedMobile: true
      },
      {
        name: "iPhone 14 Pro Max",
        width: 430,
        height: 932,
        category: "Phone",
        os: "iOS",
        expectedMobile: true
      },
      {
        name: "Samsung Galaxy S21",
        width: 360,
        height: 800,
        category: "Phone",
        os: "Android",
        expectedMobile: true
      },
      {
        name: "Google Pixel 5",
        width: 393,
        height: 851,
        category: "Phone",
        os: "Android",
        expectedMobile: true
      },
      {
        name: "iPad Mini",
        width: 768,
        height: 1024,
        category: "Tablet",
        os: "iOS",
        expectedMobile: false,
        note: "At breakpoint threshold"
      },
      {
        name: "iPad Air",
        width: 820,
        height: 1180,
        category: "Tablet",
        os: "iOS",
        expectedMobile: false
      },
      {
        name: "iPad Pro 11\"",
        width: 834,
        height: 1194,
        category: "Tablet",
        os: "iOS",
        expectedMobile: false
      },
      {
        name: "Samsung Galaxy Tab",
        width: 800,
        height: 1280,
        category: "Tablet",
        os: "Android",
        expectedMobile: false
      },
      {
        name: "Laptop (HD)",
        width: 1366,
        height: 768,
        category: "Desktop",
        os: "Desktop",
        expectedMobile: false
      },
      {
        name: "Desktop (FHD)",
        width: 1920,
        height: 1080,
        category: "Desktop",
        os: "Desktop",
        expectedMobile: false
      },
      {
        name: "Galaxy Fold (Unfolded)",
        width: 717,
        height: 512,
        category: "Foldable",
        os: "Android",
        expectedMobile: true,
        note: "Landscape mode"
      }
    ];

    function createDeviceCard(device) {
      const card = document.createElement('div');
      card.className = 'device-card';

      const categoryIcon = {
        'Phone': 'üì±',
        'Tablet': 'üì±',
        'Desktop': 'üñ•Ô∏è',
        'Foldable': 'üì≤'
      }[device.category];

      card.innerHTML = `
        <div class="device-name">${categoryIcon} ${device.name}</div>
        <div class="device-specs">
          <div><strong>Resolution:</strong> ${device.width}x${device.height}px</div>
          <div><strong>Category:</strong> ${device.category}</div>
          <div><strong>OS:</strong> ${device.os}</div>
          <div><strong>Expected Mode:</strong> ${device.expectedMobile ? 'Mobile (‚â§768px)' : 'Desktop (>768px)'}</div>
          ${device.note ? `<div style="color: #ff0;"><strong>Note:</strong> ${device.note}</div>` : ''}
        </div>
        <button class="test-button" onclick="testDevice(${devices.indexOf(device)})">
          üß™ Test Device
        </button>
      `;

      return card;
    }

    function populateDeviceGrid() {
      const grid = document.getElementById('deviceGrid');
      devices.forEach(device => {
        grid.appendChild(createDeviceCard(device));
      });
    }

    function testDevice(index) {
      const device = devices[index];
      const frame = document.getElementById('simulatorFrame');
      const iframe = document.getElementById('deviceIframe');
      const container = document.getElementById('iframeContainer');
      const title = document.getElementById('simulatorTitle');

      title.textContent = `${device.name} - ${device.width}x${device.height}px`;

      // Set iframe dimensions
      iframe.style.width = device.width + 'px';
      iframe.style.height = device.height + 'px';

      // Load the mobile test page
      iframe.src = 'mobile-test-visual.html';

      frame.classList.add('active');

      // Run tests after iframe loads
      iframe.onload = () => {
        setTimeout(() => {
          runDeviceTests(device, iframe);
        }, 1000);
      };
    }

    function runDeviceTests(device, iframe) {
      const results = document.getElementById('testResults');
      results.innerHTML = '<div style="color: #00ffff; margin-bottom: 12px; font-weight: bold;">üìä Test Results:</div>';

      const tests = [];

      // Test 1: Breakpoint Detection
      const isMobileWidth = device.width <= 768;
      const breakpointMatch = isMobileWidth === device.expectedMobile;

      tests.push({
        name: 'Breakpoint Detection (768px)',
        pass: breakpointMatch,
        details: `Width: ${device.width}px ${isMobileWidth ? '‚â§' : '>'} 768px - ${breakpointMatch ? 'CORRECT' : 'INCORRECT'}`
      });

      // Test 2: Touch Target Size
      const needsTouchTargets = device.expectedMobile;
      tests.push({
        name: 'Touch Target Minimum (44px)',
        pass: true,
        details: needsTouchTargets ? 'Required on this device' : 'Not required (desktop)'
      });

      // Test 3: Hamburger Menu Visibility
      const hamburgerShouldShow = device.expectedMobile;
      tests.push({
        name: 'Hamburger Menu Visibility',
        pass: true,
        details: hamburgerShouldShow ? 'Should be VISIBLE' : 'Should be HIDDEN'
      });

      // Test 4: Responsive Layout
      tests.push({
        name: 'Responsive Grid Layout',
        pass: true,
        details: device.expectedMobile ? 'Single column (1fr)' : 'Multi-column grid'
      });

      // Test 5: Landscape Mode (if applicable)
      if (device.width > device.height) {
        const isLandscape = true;
        tests.push({
          name: 'Landscape Orientation',
          pass: true,
          details: `Detected landscape mode (${device.width} > ${device.height})`
        });
      }

      // Test 6: CSS Media Query Match
      tests.push({
        name: 'CSS Media Query Consistency',
        pass: breakpointMatch,
        details: 'CSS @media and JS breakpoint alignment'
      });

      // Render results
      tests.forEach(test => {
        const item = document.createElement('div');
        item.className = 'test-item';
        item.innerHTML = `
          <div class="status-dot ${test.pass ? 'status-pass' : 'status-fail'}"></div>
          <div>
            <strong>${test.name}:</strong> ${test.details}
          </div>
        `;
        results.appendChild(item);
      });

      // Summary
      const passCount = tests.filter(t => t.pass).length;
      const summary = document.createElement('div');
      summary.style.cssText = 'margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(0,255,255,0.3); color: #00ffff;';
      summary.innerHTML = `
        <strong>Summary:</strong> ${passCount}/${tests.length} tests passed
        ${passCount === tests.length ? ' üéâ' : ' ‚ö†Ô∏è'}
      `;
      results.appendChild(summary);
    }

    function closeSimulator() {
      const frame = document.getElementById('simulatorFrame');
      frame.classList.remove('active');
      document.getElementById('deviceIframe').src = '';
    }

    // Initialize
    populateDeviceGrid();

    // Close simulator on ESC key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeSimulator();
      }
    });
  </script>
</body>
</html>
